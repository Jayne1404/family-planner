<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Planner - Complete Week</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .current-time {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .current-date {
            font-size: 1.5em;
            margin-bottom: 20px;
        }

        .countdown {
            padding: 20px 40px;
            border-radius: 20px;
            font-size: 1.8em;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 20px;
        }

        .countdown.green {
            background: rgba(76, 175, 80, 0.9);
        }

        .countdown.orange {
            background: rgba(255, 152, 0, 0.9);
        }

        .countdown.red {
            background: rgba(244, 67, 54, 0.9);
        }

        .day-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .day-button {
            background: rgba(255, 255, 255, 0.3);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .day-button:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: scale(1.05);
        }

        .day-button.active {
            background: white;
            color: #667eea;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .info-bar {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .info-box {
            background: white;
            padding: 20px 40px;
            border-radius: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .info-box h3 {
            color: #667eea;
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .info-box p {
            color: #333;
            font-size: 1.5em;
            font-weight: bold;
        }

        .people-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }

        .person-card {
            background: white;
            padding: 30px;
            border-radius: 25px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .person-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
        }

        .person-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            border-radius: 25px 25px 0 0;
        }

        .person-card.karl::before { background: #2196F3; }
        .person-card.jayne::before { background: #E91E63; }
        .person-card.henry::before { background: #4CAF50; }
        .person-card.sophie::before { background: #FF9800; }
        .person-card.shared::before { background: #9C27B0; }

        .person-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .person-name {
            font-size: 2.5em;
            font-weight: bold;
            color: #333;
        }

        .person-time {
            font-size: 1.3em;
            color: #666;
            font-weight: bold;
        }

        .progress-display {
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .progress-text {
            text-align: center;
            color: #666;
            font-size: 1.1em;
        }

        /* Detail View Styles */
        .detail-view {
            display: none;
        }

        .detail-view.active {
            display: block;
        }

        .back-button {
            background: white;
            color: #667eea;
            border: none;
            padding: 15px 30px;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .back-button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .detail-header {
            background: white;
            padding: 30px;
            border-radius: 25px;
            margin-bottom: 20px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .detail-header h2 {
            font-size: 2.5em;
            color: #333;
            margin-bottom: 15px;
        }

        .task-section {
            background: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .task-section h3 {
            font-size: 1.8em;
            color: #667eea;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .task-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .task-item {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .task-item:hover {
            background: #e8e8e8;
            transform: translateX(5px);
        }

        .task-item.completed {
            background: #c8e6c9;
            border-color: #4CAF50;
        }

        .task-checkbox {
            width: 40px;
            height: 40px;
            border: 3px solid #667eea;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .task-item.completed .task-checkbox {
            background: #4CAF50;
            border-color: #4CAF50;
            color: white;
        }

        .task-content {
            flex-grow: 1;
        }

        .task-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
        }

        .task-item.completed .task-title {
            text-decoration: line-through;
            color: #666;
        }

        .expandable-task {
            cursor: pointer;
        }

        .subtask-container {
            display: none;
            margin-top: 15px;
            padding-left: 20px;
            border-left: 3px solid #667eea;
        }

        .subtask-container.expanded {
            display: block;
        }

        .subtask-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #e0e0e0;
        }

        .subtask-item:hover {
            background: #f8f8f8;
        }

        .subtask-item.completed {
            background: #e8f5e9;
            border-color: #4CAF50;
        }

        .subtask-checkbox {
            width: 30px;
            height: 30px;
            border: 2px solid #667eea;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            flex-shrink: 0;
        }

        .subtask-item.completed .subtask-checkbox {
            background: #4CAF50;
            border-color: #4CAF50;
            color: white;
        }

        .subtask-text {
            font-size: 1.1em;
            color: #333;
        }

        .subtask-item.completed .subtask-text {
            text-decoration: line-through;
            color: #666;
        }

        .expand-icon {
            margin-left: auto;
            font-size: 1.2em;
            transition: transform 0.3s ease;
        }

        .expandable-task.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .celebration-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .celebration-modal.active {
            display: flex;
        }

        .celebration-content {
            background: white;
            padding: 50px;
            border-radius: 30px;
            text-align: center;
            animation: celebrate 0.5s ease;
        }

        @keyframes celebrate {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        .celebration-content h2 {
            font-size: 3em;
            color: #4CAF50;
            margin-bottom: 20px;
        }

        .celebration-content p {
            font-size: 1.5em;
            color: #666;
        }

        .celebration-emoji {
            font-size: 5em;
            margin-bottom: 20px;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .people-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .person-name {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Main Dashboard View -->
        <div id="main-view">
            <div class="header">
                <h1>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family Planner</h1>
                <div class="current-time" id="current-time">Loading...</div>
                <div class="current-date" id="current-date">Loading...</div>
                <div class="countdown green" id="countdown">Loading...</div>
            </div>

            <div class="day-selector">
                <button class="day-button" onclick="selectDay('Monday')">Monday</button>
                <button class="day-button" onclick="selectDay('Tuesday')">Tuesday</button>
                <button class="day-button" onclick="selectDay('Wednesday')">Wednesday</button>
                <button class="day-button" onclick="selectDay('Thursday')">Thursday</button>
                <button class="day-button" onclick="selectDay('Friday')">Friday</button>
                <button class="day-button" onclick="selectDay('Saturday')">Saturday</button>
                <button class="day-button" onclick="selectDay('Sunday')">Sunday</button>
            </div>

            <div class="info-bar">
                <div class="info-box">
                    <h3>ğŸ½ï¸ Tonight's Dinner</h3>
                    <p id="dinner-info">Loading...</p>
                </div>
                <div class="info-box">
                    <h3>ğŸ“† Today's Agenda</h3>
                    <p id="agenda-info">Loading...</p>
                </div>
            </div>

            <div class="people-grid">
                <div class="person-card karl" onclick="showDetail('karl')">
                    <div class="person-header">
                        <div class="person-name">ğŸ‘¨ Karl</div>
                        <div class="person-time" id="karl-leave-time">--:--</div>
                    </div>
                    <div class="progress-display">
                        <div class="progress-bar">
                            <div class="progress-fill" id="karl-progress-fill" style="width: 0%">
                                <span id="karl-progress-text">0%</span>
                            </div>
                        </div>
                        <div class="progress-text" id="karl-task-count">0 / 0 tasks</div>
                    </div>
                </div>

                <div class="person-card jayne" onclick="showDetail('jayne')">
                    <div class="person-header">
                        <div class="person-name">ğŸ‘© Jayne</div>
                        <div class="person-time" id="jayne-leave-time">--:--</div>
                    </div>
                    <div class="progress-display">
                        <div class="progress-bar">
                            <div class="progress-fill" id="jayne-progress-fill" style="width: 0%">
                                <span id="jayne-progress-text">0%</span>
                            </div>
                        </div>
                        <div class="progress-text" id="jayne-task-count">0 / 0 tasks</div>
                    </div>
                </div>

                <div class="person-card henry" onclick="showDetail('henry')">
                    <div class="person-header">
                        <div class="person-name">ğŸ§’ Henry</div>
                        <div class="person-time"></div>
                    </div>
                    <div class="progress-display">
                        <div class="progress-bar">
                            <div class="progress-fill" id="henry-progress-fill" style="width: 0%">
                                <span id="henry-progress-text">0%</span>
                            </div>
                        </div>
                        <div class="progress-text" id="henry-task-count">0 / 0 tasks</div>
                    </div>
                </div>

                <div class="person-card sophie" onclick="showDetail('sophie')">
                    <div class="person-header">
                        <div class="person-name">ğŸ‘§ Sophie</div>
                        <div class="person-time"></div>
                    </div>
                    <div class="progress-display">
                        <div class="progress-bar">
                            <div class="progress-fill" id="sophie-progress-fill" style="width: 0%">
                                <span id="sophie-progress-text">0%</span>
                            </div>
                        </div>
                        <div class="progress-text" id="sophie-task-count">0 / 0 tasks</div>
                    </div>
                </div>

                <div class="person-card shared" onclick="showDetail('shared')">
                    <div class="person-header">
                        <div class="person-name">ğŸ  Shared</div>
                        <div class="person-time"></div>
                    </div>
                    <div class="progress-display">
                        <div class="progress-bar">
                            <div class="progress-fill" id="shared-progress-fill" style="width: 0%">
                                <span id="shared-progress-text">0%</span>
                            </div>
                        </div>
                        <div class="progress-text" id="shared-task-count">0 / 0 tasks</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Detail Views for each person -->
        <div id="karl-detail" class="detail-view"></div>
        <div id="jayne-detail" class="detail-view"></div>
        <div id="henry-detail" class="detail-view"></div>
        <div id="sophie-detail" class="detail-view"></div>
        <div id="shared-detail" class="detail-view"></div>

        <!-- Celebration Modal -->
        <div class="celebration-modal" id="celebration-modal">
            <div class="celebration-content">
                <div class="celebration-emoji">ğŸ‰</div>
                <h2 id="celebration-title">Awesome!</h2>
                <p id="celebration-message">Task completed!</p>
            </div>
        </div>
    </div>

    <script>
        // Complete Task Data for All 4 People for All 7 Days
        const taskData = {
            Monday: {
                karl: {
                    morning: [
                        { id: 'karl-mon-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'karl-mon-shower', title: 'Shower ğŸš¿', expandable: false },
                        { id: 'karl-mon-bed', title: 'Make Bed ğŸ›ï¸', expandable: false },
                        { id: 'karl-mon-coffee', title: 'Coffee â˜•ï¸', expandable: false },
                        { id: 'karl-mon-breakfast', title: 'Breakfast ğŸ', expandable: false },
                        { id: 'karl-mon-dishes', title: 'Dishes Away ğŸ¥£', expandable: false },
                        { id: 'karl-mon-vitamins', title: 'Take Vitamins ğŸ’Š', expandable: false },
                        { id: 'karl-mon-teeth', title: 'Teeth ğŸ¦·', expandable: false }
                    ],
                    evening: [
                        { id: 'karl-mon-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'karl-mon-teeth-pm', title: 'Teeth ğŸ¦·', expandable: false },
                        { id: 'karl-mon-henry-bed', title: 'Put Henry to Bed ğŸ›Œ', expandable: false }
                    ]
                },
                jayne: {
                    morning: [
                        { id: 'jayne-mon-wake', title: 'Wake up â˜€ï¸', expandable: false },
                        { id: 'jayne-mon-shower', title: 'Shower ğŸš¿', expandable: false },
                        { id: 'jayne-mon-breakfast', title: 'Breakfast ğŸ', expandable: false },
                        { id: 'jayne-mon-coffee', title: 'Coffee â˜•ï¸', expandable: false },
                        { id: 'jayne-mon-dishes', title: 'Dishes away ğŸ¥£', expandable: false },
                        { id: 'jayne-mon-washing', title: 'Swap Washing ğŸ§º', expandable: false },
                        { id: 'jayne-mon-teeth', title: 'Teeth ğŸ¦·', expandable: false },
                        { 
                            id: 'jayne-mon-face',
                            title: 'Wash Face ğŸ§–ğŸ¼',
                            expandable: true,
                            subtasks: [
                                { id: 'jayne-mon-cleanse', text: 'Gentle cleanser' },
                                { id: 'jayne-mon-toner', text: 'Apply toner' },
                                { id: 'jayne-mon-serum', text: 'Vitamin C serum' },
                                { id: 'jayne-mon-eye', text: 'Eye cream' },
                                { id: 'jayne-mon-moisturizer', text: 'Moisturizer' },
                                { id: 'jayne-mon-sunscreen', text: 'SPF 50+ sunscreen' }
                            ]
                        },
                        { id: 'jayne-mon-drop', title: 'Drop kids ğŸš˜', expandable: false },
                        { id: 'jayne-mon-poo', title: 'Pick up poo ğŸ’©', expandable: false },
                        { id: 'jayne-mon-molly', title: 'Walk Molly ğŸ¦®', expandable: false }
                    ],
                    evening: [
                        { id: 'jayne-mon-pickup-h', title: 'Pick up Henry ğŸ§’ğŸ»', expandable: false },
                        { id: 'jayne-mon-pickup-s', title: 'Pick up Sophie ğŸ‘§ğŸ»', expandable: false },
                        { id: 'jayne-mon-swap', title: 'Swap washing ğŸ§º', expandable: false },
                        { id: 'jayne-mon-put-away', title: 'Put washing away ğŸ§£', expandable: false },
                        { id: 'jayne-mon-walk', title: 'Walk Molly ğŸ¦®', expandable: false },
                        { id: 'jayne-mon-sophie-bed', title: 'Sophie to bed ğŸ›Œ', expandable: false },
                        { id: 'jayne-mon-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'jayne-mon-vitamins', title: 'Take Vitamins ğŸ’Š', expandable: false },
                        { id: 'jayne-mon-teeth-pm', title: 'Teeth ğŸ¦·', expandable: false },
                        { 
                            id: 'jayne-mon-face-pm',
                            title: 'Wash Face ğŸ§–ğŸ¼',
                            expandable: true,
                            subtasks: [
                                { id: 'jayne-mon-makeup', text: 'Remove makeup' },
                                { id: 'jayne-mon-cleanse-pm', text: 'Double cleanse' },
                                { id: 'jayne-mon-toner-pm', text: 'Apply toner' },
                                { id: 'jayne-mon-treatment', text: 'Treatment serum' },
                                { id: 'jayne-mon-eye-pm', text: 'Eye cream' },
                                { id: 'jayne-mon-night', text: 'Rich night cream' },
                                { id: 'jayne-mon-lip', text: 'Lip treatment' }
                            ]
                        }
                    ]
                },
                henry: {
                    morning: [
                        { id: 'henry-mon-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'henry-mon-dressed', title: 'Get Dressed ğŸ‘•', expandable: false },
                        { id: 'henry-mon-breakfast', title: 'Breakfast ğŸ½ï¸', expandable: false },
                        { id: 'henry-mon-teeth', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'henry-mon-bag', title: 'Pack Bag ğŸ’', expandable: false },
                        { id: 'henry-mon-shoes', title: 'Socks & Shoes On ğŸ§¦ğŸ‘Ÿ', expandable: false }
                    ],
                    evening: [
                        { id: 'henry-mon-unpack', title: 'Unpack Bag ğŸ’', expandable: false },
                        { id: 'henry-mon-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'henry-mon-bath', title: 'Bath Time ğŸ›', expandable: false },
                        { id: 'henry-mon-teeth-pm', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'henry-mon-story', title: 'Bedtime Story ğŸ“š', expandable: false },
                        { id: 'henry-mon-sleep', title: 'Sleep ğŸ˜´', expandable: false }
                    ]
                },
                sophie: {
                    morning: [
                        { id: 'sophie-mon-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'sophie-mon-dressed', title: 'Get Dressed ğŸ‘—', expandable: false },
                        { id: 'sophie-mon-breakfast', title: 'Breakfast ğŸ½ï¸', expandable: false },
                        { id: 'sophie-mon-teeth', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'sophie-mon-bag', title: 'Pack Bag ğŸ’', expandable: false },
                        { id: 'sophie-mon-shoes', title: 'Socks & Shoes On ğŸ§¦ğŸ‘Ÿ', expandable: false }
                    ],
                    evening: [
                        { id: 'sophie-mon-unpack', title: 'Unpack Bag ğŸ’', expandable: false },
                        { id: 'sophie-mon-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'sophie-mon-bath', title: 'Bath Time ğŸ›', expandable: false },
                        { id: 'sophie-mon-teeth-pm', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'sophie-mon-story', title: 'Bedtime Story ğŸ“š', expandable: false },
                        { id: 'sophie-mon-sleep', title: 'Sleep ğŸ˜´', expandable: false }
                    ]
                },
                shared: [
                    { id: 'shared-mon-office', title: 'Wipe surfaces in office', expandable: false },
                    { id: 'shared-mon-entrance', title: 'Wipe surfaces entrance', expandable: false },
                    { id: 'shared-mon-bedroom', title: 'Wipe surfaces Bedroom', expandable: false },
                    { id: 'shared-mon-wir', title: 'Wipe Surfaces WIR', expandable: false },
                    { id: 'shared-mon-bedding', title: 'Change bedding', expandable: false },
                    { id: 'shared-mon-vac-office', title: 'Vacuum Office', expandable: false },
                    { id: 'shared-mon-vac-entrance', title: 'Vacuum Entrance', expandable: false },
                    { id: 'shared-mon-vac-bedroom', title: 'Vacuum Bedroom', expandable: false },
                    { id: 'shared-mon-vac-wir', title: 'Vacuum WIR', expandable: false },
                    { id: 'shared-mon-mop', title: 'Mop Entrance', expandable: false }
                ]
            },
            Tuesday: {
                karl: {
                    morning: [
                        { id: 'karl-tue-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'karl-tue-shower', title: 'Shower ğŸš¿', expandable: false },
                        { id: 'karl-tue-breakfast', title: 'Breakfast ğŸ', expandable: false },
                        { id: 'karl-tue-coffee', title: 'Coffee â˜•ï¸', expandable: false },
                        { id: 'karl-tue-dishes', title: 'Dishes Away ğŸ¥£', expandable: false },
                        { id: 'karl-tue-bed', title: 'Make Bed ğŸ›ï¸', expandable: false },
                        { id: 'karl-tue-dishwasher', title: 'Unpack Dishwasher ğŸ´', expandable: false },
                        { id: 'karl-tue-washing', title: 'Swap Washing ğŸ§º', expandable: false },
                        { id: 'karl-tue-vitamins', title: 'Take Vitamins ğŸ’Š', expandable: false },
                        { id: 'karl-tue-teeth', title: 'Teeth ğŸ¦·', expandable: false },
                        { id: 'karl-tue-drop', title: 'Drop kids ğŸš™', expandable: false },
                        { id: 'karl-tue-molly', title: 'Walk Molly ğŸ¦®', expandable: false }
                    ],
                    evening: [
                        { id: 'karl-tue-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'karl-tue-teeth-pm', title: 'Teeth ğŸ¦·', expandable: false },
                        { id: 'karl-tue-pickup', title: 'Pick up kids ğŸš™', expandable: false },
                        { id: 'karl-tue-put-away', title: 'Put washing away ğŸ§º', expandable: false },
                        { id: 'karl-tue-poo', title: 'Pick up poo ğŸ’©', expandable: false },
                        { id: 'karl-tue-sophie-bed', title: 'Put Sophie to bed ğŸ›Œ', expandable: false }
                    ]
                },
                jayne: {
                    morning: [
                        { id: 'jayne-tue-wake', title: 'Wake up â˜€ï¸', expandable: false },
                        { id: 'jayne-tue-shower', title: 'Shower ğŸš¿', expandable: false },
                        { id: 'jayne-tue-breakfast', title: 'Breakfast ğŸ', expandable: false },
                        { id: 'jayne-tue-coffee', title: 'Coffee â˜•ï¸', expandable: false },
                        { id: 'jayne-tue-dishes', title: 'Dishes Away ğŸ¥£', expandable: false },
                        { 
                            id: 'jayne-tue-face',
                            title: 'Wash Face ğŸ§–ğŸ¼',
                            expandable: true,
                            subtasks: [
                                { id: 'jayne-tue-cleanse', text: 'Gentle cleanser' },
                                { id: 'jayne-tue-toner', text: 'Apply toner' },
                                { id: 'jayne-tue-serum', text: 'Vitamin C serum' },
                                { id: 'jayne-tue-eye', text: 'Eye cream' },
                                { id: 'jayne-tue-moisturizer', text: 'Moisturizer' },
                                { id: 'jayne-tue-sunscreen', text: 'SPF 50+ sunscreen' }
                            ]
                        }
                    ],
                    evening: [
                        { id: 'jayne-tue-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'jayne-tue-teeth-pm', title: 'Teeth ğŸ¦·', expandable: false },
                        { id: 'jayne-tue-washing', title: 'Swap Washing ğŸ§º', expandable: false },
                        { id: 'jayne-tue-henry-bed', title: 'Put Henry to bed ğŸ›Œ', expandable: false },
                        { id: 'jayne-tue-vitamins', title: 'Take Vitamins ğŸ’Š', expandable: false },
                        { 
                            id: 'jayne-tue-face-pm',
                            title: 'Wash Face ğŸ§–ğŸ¼',
                            expandable: true,
                            subtasks: [
                                { id: 'jayne-tue-makeup', text: 'Remove makeup' },
                                { id: 'jayne-tue-cleanse-pm', text: 'Double cleanse' },
                                { id: 'jayne-tue-toner-pm', text: 'Apply toner' },
                                { id: 'jayne-tue-treatment', text: 'Treatment serum' },
                                { id: 'jayne-tue-eye-pm', text: 'Eye cream' },
                                { id: 'jayne-tue-night', text: 'Rich night cream' },
                                { id: 'jayne-tue-lip', text: 'Lip treatment' }
                            ]
                        }
                    ]
                },
                henry: {
                    morning: [
                        { id: 'henry-tue-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'henry-tue-dressed', title: 'Get Dressed ğŸ‘•', expandable: false },
                        { id: 'henry-tue-breakfast', title: 'Breakfast ğŸ½ï¸', expandable: false },
                        { id: 'henry-tue-teeth', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'henry-tue-bag', title: 'Pack Bag ğŸ’', expandable: false },
                        { id: 'henry-tue-shoes', title: 'Socks & Shoes On ğŸ§¦ğŸ‘Ÿ', expandable: false }
                    ],
                    evening: [
                        { id: 'henry-tue-unpack', title: 'Unpack Bag ğŸ’', expandable: false },
                        { id: 'henry-tue-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'henry-tue-bath', title: 'Bath Time ğŸ›', expandable: false },
                        { id: 'henry-tue-teeth-pm', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'henry-tue-story', title: 'Bedtime Story ğŸ“š', expandable: false },
                        { id: 'henry-tue-bed', title: 'Bed ğŸ›Œ', expandable: false },
                        { id: 'henry-tue-sleep', title: 'Sleep ğŸ˜´', expandable: false }
                    ]
                },
                sophie: {
                    morning: [
                        { id: 'sophie-tue-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'sophie-tue-dressed', title: 'Get Dressed ğŸ‘—', expandable: false },
                        { id: 'sophie-tue-breakfast', title: 'Breakfast ğŸ½ï¸', expandable: false },
                        { id: 'sophie-tue-teeth', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'sophie-tue-bag', title: 'Pack Bag ğŸ’', expandable: false },
                        { id: 'sophie-tue-shoes', title: 'Socks & Shoes On ğŸ§¦ğŸ‘Ÿ', expandable: false }
                    ],
                    evening: [
                        { id: 'sophie-tue-unpack', title: 'Unpack Bag ğŸ’', expandable: false },
                        { id: 'sophie-tue-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'sophie-tue-bath', title: 'Bath Time ğŸ›', expandable: false },
                        { id: 'sophie-tue-teeth-pm', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'sophie-tue-story', title: 'Bedtime Story ğŸ“š', expandable: false },
                        { id: 'sophie-tue-sleep', title: 'Sleep ğŸ˜´', expandable: false }
                    ]
                },
                shared: [
                    { id: 'shared-tue-ensuite', title: 'Wipe Surfaces Ensuite', expandable: false },
                    { id: 'shared-tue-shower', title: 'Clean Shower Ensuite', expandable: false },
                    { id: 'shared-tue-toilet-en', title: 'Clean Toilet Ensuite', expandable: false },
                    { id: 'shared-tue-kitchen', title: 'Clean Kitchen', expandable: false },
                    { id: 'shared-tue-lounge', title: 'Clean surfaces Lounge', expandable: false },
                    { id: 'shared-tue-towel-en', title: 'Change Towels Ensuite', expandable: false },
                    { id: 'shared-tue-towel-kit', title: 'Change Towel Kitchen', expandable: false },
                    { id: 'shared-tue-tp-en', title: 'Top Up Toilet Paper Ensuite', expandable: false },
                    { id: 'shared-tue-wash-en', title: 'Top Up Washes Ensuite', expandable: false },
                    { id: 'shared-tue-wash-kit', title: 'Top Up Washes Kitchen', expandable: false },
                    { id: 'shared-tue-vac-en', title: 'Vacuum Ensuite', expandable: false },
                    { id: 'shared-tue-vac-kit', title: 'Vacuum Kitchen', expandable: false },
                    { id: 'shared-tue-vac-lounge', title: 'Vacuum Lounge', expandable: false },
                    { id: 'shared-tue-mop-en', title: 'Mop Ensuite', expandable: false },
                    { id: 'shared-tue-mop-kit', title: 'Mop Kitchen', expandable: false },
                    { id: 'shared-tue-mop-lounge', title: 'Mop Lounge', expandable: false }
                ]
            },
            Wednesday: {
                karl: {
                    morning: [
                        { id: 'karl-wed-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'karl-wed-shower', title: 'Shower ğŸš¿', expandable: false },
                        { id: 'karl-wed-bed', title: 'Make bed ğŸ›ï¸', expandable: false },
                        { id: 'karl-wed-breakfast', title: 'Breakfast ğŸ', expandable: false },
                        { id: 'karl-wed-coffee', title: 'Coffee â˜•ï¸', expandable: false },
                        { id: 'karl-wed-dishes', title: 'Dishes Away ğŸ¥£', expandable: false },
                        { id: 'karl-wed-vitamins', title: 'Take Vitamins ğŸ’Š', expandable: false },
                        { id: 'karl-wed-teeth', title: 'Teeth ğŸ¦·', expandable: false }
                    ],
                    evening: [
                        { id: 'karl-wed-pickup-h', title: 'Pick up Henry - early ğŸš™', expandable: false },
                        { id: 'karl-wed-henry-time', title: 'Time with Henry ğŸ§’ğŸ»', expandable: false },
                        { id: 'karl-wed-pickup-s', title: 'Pick up Sophie ğŸš™', expandable: false },
                        { id: 'karl-wed-washing', title: 'Swap washing ğŸ§º', expandable: false },
                        { id: 'karl-wed-molly', title: 'Walk Molly ğŸ¦®', expandable: false },
                        { id: 'karl-wed-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'karl-wed-henry-bed', title: 'Put Henry to bed ğŸ›Œ', expandable: false },
                        { id: 'karl-wed-teeth-pm', title: 'Teeth ğŸ¦·', expandable: false }
                    ]
                },
                jayne: {
                    morning: [
                        { id: 'jayne-wed-wake', title: 'Wake up â˜€ï¸', expandable: false },
                        { id: 'jayne-wed-shower', title: 'Shower ğŸš¿', expandable: false },
                        { id: 'jayne-wed-breakfast', title: 'Breakfast ğŸ', expandable: false },
                        { id: 'jayne-wed-coffee', title: 'Coffee â˜•ï¸', expandable: false },
                        { id: 'jayne-wed-dishes', title: 'Dishes away ğŸ¥£', expandable: false },
                        { id: 'jayne-wed-washing', title: 'Swap washing ğŸ§º', expandable: false },
                        { id: 'jayne-wed-poo', title: 'Pick up poo ğŸ’©', expandable: false },
                        { id: 'jayne-wed-teeth', title: 'Teeth ğŸ¦·', expandable: false },
                        { id: 'jayne-wed-drop', title: 'Drop Kids ğŸš˜', expandable: false },
                        { id: 'jayne-wed-molly', title: 'Walk Molly ğŸ¦®', expandable: false },
                        { 
                            id: 'jayne-wed-face',
                            title: 'Wash Face ğŸ§–ğŸ¼',
                            expandable: true,
                            subtasks: [
                                { id: 'jayne-wed-cleanse', text: 'Gentle cleanser' },
                                { id: 'jayne-wed-toner', text: 'Apply toner' },
                                { id: 'jayne-wed-serum', text: 'Vitamin C serum' },
                                { id: 'jayne-wed-eye', text: 'Eye cream' },
                                { id: 'jayne-wed-moisturizer', text: 'Moisturizer' },
                                { id: 'jayne-wed-sunscreen', text: 'SPF 50+ sunscreen' }
                            ]
                        }
                    ],
                    evening: [
                        { id: 'jayne-wed-put-away', title: 'Put Washing Away ğŸ§º', expandable: false },
                        { id: 'jayne-wed-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'jayne-wed-sophie-bed', title: 'Put Sophie to bed ğŸ›Œ', expandable: false },
                        { id: 'jayne-wed-teeth-pm', title: 'Teeth ğŸ¦·', expandable: false },
                        { id: 'jayne-wed-vitamins', title: 'Take Vitamins ğŸ’Š', expandable: false },
                        { 
                            id: 'jayne-wed-face-pm',
                            title: 'Wash Face ğŸ§–ğŸ¼',
                            expandable: true,
                            subtasks: [
                                { id: 'jayne-wed-makeup', text: 'Remove makeup' },
                                { id: 'jayne-wed-cleanse-pm', text: 'Double cleanse' },
                                { id: 'jayne-wed-toner-pm', text: 'Apply toner' },
                                { id: 'jayne-wed-treatment', text: 'Treatment serum' },
                                { id: 'jayne-wed-eye-pm', text: 'Eye cream' },
                                { id: 'jayne-wed-night', text: 'Rich night cream' },
                                { id: 'jayne-wed-lip', text: 'Lip treatment' }
                            ]
                        }
                    ]
                },
                henry: {
                    morning: [
                        { id: 'henry-wed-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'henry-wed-dressed', title: 'Get Dressed ğŸ‘•', expandable: false },
                        { id: 'henry-wed-breakfast', title: 'Breakfast ğŸ½ï¸', expandable: false },
                        { id: 'henry-wed-teeth', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'henry-wed-bag', title: 'Pack Bag ğŸ’', expandable: false },
                        { id: 'henry-wed-shoes', title: 'Socks & Shoes On ğŸ§¦ğŸ‘Ÿ', expandable: false }
                    ],
                    evening: [
                        { id: 'henry-wed-unpack', title: 'Unpack Bag ğŸ’', expandable: false },
                        { id: 'henry-wed-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'henry-wed-bath', title: 'Bath Time ğŸ›', expandable: false },
                        { id: 'henry-wed-teeth-pm', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'henry-wed-story', title: 'Bedtime Story ğŸ“š', expandable: false },
                        { id: 'henry-wed-sleep', title: 'Sleep ğŸ˜´', expandable: false }
                    ]
                },
                sophie: {
                    morning: [
                        { id: 'sophie-wed-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'sophie-wed-dressed', title: 'Get Dressed ğŸ‘—', expandable: false },
                        { id: 'sophie-wed-breakfast', title: 'Breakfast ğŸ½ï¸', expandable: false },
                        { id: 'sophie-wed-teeth', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'sophie-wed-bag', title: 'Pack Bag ğŸ’', expandable: false },
                        { id: 'sophie-wed-shoes', title: 'Socks & Shoes On ğŸ§¦ğŸ‘Ÿ', expandable: false }
                    ],
                    evening: [
                        { id: 'sophie-wed-unpack', title: 'Unpack Bag ğŸ’', expandable: false },
                        { id: 'sophie-wed-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'sophie-wed-bath', title: 'Bath Time ğŸ›', expandable: false },
                        { id: 'sophie-wed-teeth-pm', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'sophie-wed-story', title: 'Bedtime Story ğŸ“š', expandable: false },
                        { id: 'sophie-wed-sleep', title: 'Sleep ğŸ˜´', expandable: false }
                    ]
                },
                shared: [
                    { id: 'shared-wed-dining', title: 'Wipe surfaces in dining room', expandable: false },
                    { id: 'shared-wed-laundry', title: 'Wipe surfaces in laundry', expandable: false },
                    { id: 'shared-wed-bathroom', title: 'Wipe surfaces in bathroom', expandable: false },
                    { id: 'shared-wed-shower', title: 'Clean shower', expandable: false },
                    { id: 'shared-wed-bath', title: 'Clean bath', expandable: false },
                    { id: 'shared-wed-toilet', title: 'Clean toilet', expandable: false },
                    { id: 'shared-wed-towel-bath', title: 'Change towels bathroom', expandable: false },
                    { id: 'shared-wed-towel-laun', title: 'Change towel in laundry', expandable: false },
                    { id: 'shared-wed-tp', title: 'Top up toilet paper', expandable: false },
                    { id: 'shared-wed-washes', title: 'Top up washes', expandable: false },
                    { id: 'shared-wed-vac-din', title: 'Vacuum dining room', expandable: false },
                    { id: 'shared-wed-vac-laun', title: 'Vacuum laundry', expandable: false },
                    { id: 'shared-wed-vac-bath', title: 'Vacuum bathroom', expandable: false },
                    { id: 'shared-wed-vac-toil', title: 'Vacuum toilet', expandable: false },
                    { id: 'shared-wed-mop-din', title: 'Mop dining', expandable: false },
                    { id: 'shared-wed-mop-laun', title: 'Mop laundry', expandable: false },
                    { id: 'shared-wed-mop-bath', title: 'Mop bathroom', expandable: false },
                    { id: 'shared-wed-mop-toil', title: 'Mop toilet', expandable: false }
                ]
            },
            Thursday: {
                karl: {
                    morning: [
                        { id: 'karl-thu-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'karl-thu-shower', title: 'Shower ğŸš¿', expandable: false },
                        { id: 'karl-thu-breakfast', title: 'Breakfast ğŸ', expandable: false },
                        { id: 'karl-thu-coffee', title: 'Coffee â˜•ï¸', expandable: false },
                        { id: 'karl-thu-dishes', title: 'Dishes Away ğŸ¥£', expandable: false },
                        { id: 'karl-thu-dishwasher', title: 'Unpack dishwasher ğŸ´', expandable: false },
                        { id: 'karl-thu-bed', title: 'Make bed ğŸ›ï¸', expandable: false },
                        { id: 'karl-thu-washing', title: 'Swap washing ğŸ§º', expandable: false },
                        { id: 'karl-thu-vitamins', title: 'Take Vitamins ğŸ’Š', expandable: false },
                        { id: 'karl-thu-teeth', title: 'Teeth ğŸ¦·', expandable: false },
                        { id: 'karl-thu-drop', title: 'Drop Henry ğŸš™', expandable: false }
                    ],
                    evening: [
                        { id: 'karl-thu-pickup-s', title: 'Pick up Sophie ğŸš™', expandable: false },
                        { id: 'karl-thu-sophie-time', title: 'One on one time with Sophie ğŸ‘§ğŸ»', expandable: false },
                        { id: 'karl-thu-put-away', title: 'Put washing away ğŸ§º', expandable: false },
                        { id: 'karl-thu-poo', title: 'Pick up poo ğŸ’©', expandable: false },
                        { id: 'karl-thu-molly', title: 'Walk Molly ğŸ¦®', expandable: false },
                        { id: 'karl-thu-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'karl-thu-sophie-bed', title: 'Put Sophie to bed ğŸ›Œ', expandable: false },
                        { id: 'karl-thu-teeth-pm', title: 'Teeth ğŸ¦·', expandable: false }
                    ]
                },
                jayne: {
                    morning: [
                        { id: 'jayne-thu-wake', title: 'Wake up â˜€ï¸', expandable: false },
                        { id: 'jayne-thu-shower', title: 'Shower ğŸš¿', expandable: false },
                        { id: 'jayne-thu-breakfast', title: 'Breakfast ğŸ', expandable: false },
                        { id: 'jayne-thu-coffee', title: 'Coffee â˜•ï¸', expandable: false },
                        { id: 'jayne-thu-dishes', title: 'Dishes Away ğŸ¥£', expandable: false },
                        { id: 'jayne-thu-teeth', title: 'Teeth ğŸ¦·', expandable: false },
                        { id: 'jayne-thu-drop', title: 'Drop Sophie ğŸš˜', expandable: false },
                        { id: 'jayne-thu-molly', title: 'Walk Molly ğŸ¦®', expandable: false },
                        { 
                            id: 'jayne-thu-face',
                            title: 'Wash face ğŸ§–ğŸ¼',
                            expandable: true,
                            subtasks: [
                                { id: 'jayne-thu-cleanse', text: 'Gentle cleanser' },
                                { id: 'jayne-thu-toner', text: 'Apply toner' },
                                { id: 'jayne-thu-serum', text: 'Vitamin C serum' },
                                { id: 'jayne-thu-eye', text: 'Eye cream' },
                                { id: 'jayne-thu-moisturizer', text: 'Moisturizer' },
                                { id: 'jayne-thu-sunscreen', text: 'SPF 50+ sunscreen' }
                            ]
                        }
                    ],
                    evening: [
                        { id: 'jayne-thu-pickup-h', title: 'Pick up Henry ğŸš˜', expandable: false },
                        { id: 'jayne-thu-henry-time', title: 'One one one time Henry ğŸ§’ğŸ»', expandable: false },
                        { id: 'jayne-thu-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'jayne-thu-washing', title: 'Swap washing ğŸ§º', expandable: false },
                        { id: 'jayne-thu-henry-bed', title: 'Put Henry to bed ğŸ›Œ', expandable: false },
                        { id: 'jayne-thu-teeth-pm', title: 'Teeth ğŸ¦·', expandable: false },
                        { id: 'jayne-thu-vitamins', title: 'Take Vitamins ğŸ’Š', expandable: false },
                        { 
                            id: 'jayne-thu-face-pm',
                            title: 'Wash face ğŸ§–ğŸ¼',
                            expandable: true,
                            subtasks: [
                                { id: 'jayne-thu-makeup', text: 'Remove makeup' },
                                { id: 'jayne-thu-cleanse-pm', text: 'Double cleanse' },
                                { id: 'jayne-thu-toner-pm', text: 'Apply toner' },
                                { id: 'jayne-thu-treatment', text: 'Treatment serum' },
                                { id: 'jayne-thu-eye-pm', text: 'Eye cream' },
                                { id: 'jayne-thu-night', text: 'Rich night cream' },
                                { id: 'jayne-thu-lip', text: 'Lip treatment' }
                            ]
                        }
                    ]
                },
                henry: {
                    morning: [
                        { id: 'henry-thu-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'henry-thu-dressed', title: 'Get Dressed ğŸ‘•', expandable: false },
                        { id: 'henry-thu-breakfast', title: 'Breakfast ğŸ½ï¸', expandable: false },
                        { id: 'henry-thu-teeth', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'henry-thu-bag', title: 'Pack Bag ğŸ’', expandable: false },
                        { id: 'henry-thu-shoes', title: 'Socks & Shoes On ğŸ§¦ğŸ‘Ÿ', expandable: false }
                    ],
                    evening: [
                        { id: 'henry-thu-unpack', title: 'Unpack Bag ğŸ’', expandable: false },
                        { id: 'henry-thu-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'henry-thu-bath', title: 'Bath Time ğŸ›', expandable: false },
                        { id: 'henry-thu-teeth-pm', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'henry-thu-story', title: 'Bedtime Story ğŸ“š', expandable: false },
                        { id: 'henry-thu-sleep', title: 'Sleep ğŸ˜´', expandable: false }
                    ]
                },
                sophie: {
                    morning: [
                        { id: 'sophie-thu-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'sophie-thu-dressed', title: 'Get Dressed ğŸ‘—', expandable: false },
                        { id: 'sophie-thu-breakfast', title: 'Breakfast ğŸ½ï¸', expandable: false },
                        { id: 'sophie-thu-teeth', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'sophie-thu-bag', title: 'Pack Bag ğŸ’', expandable: false },
                        { id: 'sophie-thu-shoes', title: 'Socks & Shoes On ğŸ§¦ğŸ‘Ÿ', expandable: false }
                    ],
                    evening: [
                        { id: 'sophie-thu-unpack', title: 'Unpack Bag ğŸ’', expandable: false },
                        { id: 'sophie-thu-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'sophie-thu-bath', title: 'Bath Time ğŸ›', expandable: false },
                        { id: 'sophie-thu-teeth-pm', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'sophie-thu-story', title: 'Bedtime Story ğŸ“š', expandable: false },
                        { id: 'sophie-thu-sleep', title: 'Sleep ğŸ˜´', expandable: false }
                    ]
                },
                shared: [
                    { id: 'shared-thu-play', title: 'Wipe surfaces in play room', expandable: false },
                    { id: 'shared-thu-henry', title: 'Wipe surfaces in Henry room', expandable: false },
                    { id: 'shared-thu-sophie-surf', title: "Wipe surfaces in Sophie's room", expandable: false },
                    { id: 'shared-thu-henry-bed', title: "Change Henry's bed", expandable: false },
                    { id: 'shared-thu-sophie-bed', title: "Change Sophie's bed", expandable: false },
                    { id: 'shared-thu-vac-play', title: 'Vacuum play room', expandable: false },
                    { id: 'shared-thu-vac-henry', title: "Vacuum Henry's room", expandable: false },
                    { id: 'shared-thu-vac-sophie', title: "Vacuum Sophie's", expandable: false },
                    { id: 'shared-thu-vac-hall', title: 'Vacuum hallway', expandable: false },
                    { id: 'shared-thu-mop-hall', title: 'Mop hallway', expandable: false }
                ]
            },
            Friday: {
                karl: {
                    morning: [
                        { id: 'karl-fri-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'karl-fri-shower', title: 'Shower ğŸš¿', expandable: false },
                        { id: 'karl-fri-bed', title: 'Make bed ğŸ›ï¸', expandable: false },
                        { id: 'karl-fri-breakfast', title: 'Breakfast ğŸ', expandable: false },
                        { id: 'karl-fri-coffee', title: 'Coffee â˜•ï¸', expandable: false },
                        { id: 'karl-fri-dishes', title: 'Dishes Away ğŸ¥£', expandable: false },
                        { id: 'karl-fri-washing', title: 'Swap washing ğŸ§º', expandable: false },
                        { id: 'karl-fri-vitamins', title: 'Take Vitamins ğŸ’Š', expandable: false },
                        { id: 'karl-fri-teeth', title: 'Teeth ğŸ¦·', expandable: false },
                        { id: 'karl-fri-drop', title: 'Drop Sophie ğŸš™', expandable: false },
                        { id: 'karl-fri-molly', title: 'Walk Molly ğŸ¦®', expandable: false }
                    ],
                    evening: [
                        { id: 'karl-fri-henry-bed', title: 'Henry to bed ğŸ›Œ', expandable: false },
                        { id: 'karl-fri-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'karl-fri-teeth-pm', title: 'Teeth ğŸ¦·', expandable: false }
                    ]
                },
                jayne: {
                    morning: [
                        { id: 'jayne-fri-wake', title: 'Wake up â˜€ï¸', expandable: false },
                        { id: 'jayne-fri-shower', title: 'Shower ğŸš¿', expandable: false },
                        { id: 'jayne-fri-breakfast', title: 'Breakfast ğŸ', expandable: false },
                        { id: 'jayne-fri-coffee', title: 'Coffee â˜•ï¸', expandable: false },
                        { id: 'jayne-fri-dishwasher', title: 'Unpack Dishwasher ğŸ´', expandable: false },
                        { id: 'jayne-fri-teeth', title: 'Teeth ğŸ¦·', expandable: false },
                        { 
                            id: 'jayne-fri-face',
                            title: 'Wash Face ğŸ§–ğŸ¼',
                            expandable: true,
                            subtasks: [
                                { id: 'jayne-fri-cleanse', text: 'Gentle cleanser' },
                                { id: 'jayne-fri-toner', text: 'Apply toner' },
                                { id: 'jayne-fri-serum', text: 'Vitamin C serum' },
                                { id: 'jayne-fri-eye', text: 'Eye cream' },
                                { id: 'jayne-fri-moisturizer', text: 'Moisturizer' },
                                { id: 'jayne-fri-sunscreen', text: 'SPF 50+ sunscreen' }
                            ]
                        },
                        { id: 'jayne-fri-drop', title: 'Drop Henry ğŸš˜', expandable: false }
                    ],
                    evening: [
                        { id: 'jayne-fri-pickup-s', title: 'Pick up Sophie ğŸš˜', expandable: false },
                        { id: 'jayne-fri-sophie-time', title: 'One one one with Sophie ğŸ‘§ğŸ»', expandable: false },
                        { id: 'jayne-fri-pickup-h', title: 'Pick up Henry ğŸš˜', expandable: false },
                        { id: 'jayne-fri-molly', title: 'Walk Molly ğŸ¦®', expandable: false },
                        { id: 'jayne-fri-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'jayne-fri-swap', title: 'Swap washing ğŸ§º', expandable: false },
                        { id: 'jayne-fri-put-away', title: 'Put washing away ğŸ§º', expandable: false },
                        { id: 'jayne-fri-poo', title: 'Pick up poo ğŸ’©', expandable: false },
                        { id: 'jayne-fri-sophie-bed', title: 'Sophie to bed ğŸ›Œ', expandable: false },
                        { id: 'jayne-fri-teeth-pm', title: 'Teeth ğŸ¦·', expandable: false },
                        { id: 'jayne-fri-vitamins', title: 'Take Vitamins ğŸ’Š', expandable: false },
                        { 
                            id: 'jayne-fri-face-pm',
                            title: 'Wash Face ğŸ§–ğŸ¼',
                            expandable: true,
                            subtasks: [
                                { id: 'jayne-fri-makeup', text: 'Remove makeup' },
                                { id: 'jayne-fri-cleanse-pm', text: 'Double cleanse' },
                                { id: 'jayne-fri-toner-pm', text: 'Apply toner' },
                                { id: 'jayne-fri-treatment', text: 'Treatment serum' },
                                { id: 'jayne-fri-eye-pm', text: 'Eye cream' },
                                { id: 'jayne-fri-night', text: 'Rich night cream' },
                                { id: 'jayne-fri-lip', text: 'Lip treatment' }
                            ]
                        }
                    ]
                },
                henry: {
                    morning: [
                        { id: 'henry-fri-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'henry-fri-dressed', title: 'Get Dressed ğŸ‘•', expandable: false },
                        { id: 'henry-fri-breakfast', title: 'Breakfast ğŸ½ï¸', expandable: false },
                        { id: 'henry-fri-teeth', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'henry-fri-bag', title: 'Pack Bag ğŸ’', expandable: false },
                        { id: 'henry-fri-shoes', title: 'Socks & Shoes On ğŸ§¦ğŸ‘Ÿ', expandable: false }
                    ],
                    evening: [
                        { id: 'henry-fri-unpack', title: 'Unpack Bag ğŸ’', expandable: false },
                        { id: 'henry-fri-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'henry-fri-bath', title: 'Bath Time ğŸ›', expandable: false },
                        { id: 'henry-fri-teeth-pm', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'henry-fri-story', title: 'Bedtime Story ğŸ“š', expandable: false },
                        { id: 'henry-fri-sleep', title: 'Sleep ğŸ˜´', expandable: false }
                    ]
                },
                sophie: {
                    morning: [
                        { id: 'sophie-fri-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'sophie-fri-dressed', title: 'Get Dressed ğŸ‘—', expandable: false },
                        { id: 'sophie-fri-breakfast', title: 'Breakfast ğŸ½ï¸', expandable: false },
                        { id: 'sophie-fri-teeth', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'sophie-fri-bag', title: 'Pack Bag ğŸ’', expandable: false },
                        { id: 'sophie-fri-shoes', title: 'Socks & Shoes On ğŸ§¦ğŸ‘Ÿ', expandable: false }
                    ],
                    evening: [
                        { id: 'sophie-fri-unpack', title: 'Unpack Bag ğŸ’', expandable: false },
                        { id: 'sophie-fri-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'sophie-fri-bath', title: 'Bath Time ğŸ›', expandable: false },
                        { id: 'sophie-fri-teeth-pm', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'sophie-fri-story', title: 'Bedtime Story ğŸ“š', expandable: false },
                        { id: 'sophie-fri-sleep', title: 'Sleep ğŸ˜´', expandable: false }
                    ]
                },
                shared: []
            },
            Saturday: {
                karl: {
                    morning: [
                        { id: 'karl-sat-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'karl-sat-shower', title: 'Shower ğŸš¿', expandable: false },
                        { id: 'karl-sat-bed', title: 'Make bed ğŸ›ï¸', expandable: false },
                        { id: 'karl-sat-breakfast', title: 'Breakfast ğŸ', expandable: false },
                        { id: 'karl-sat-coffee', title: 'Coffee â˜•ï¸', expandable: false },
                        { id: 'karl-sat-dishes', title: 'Dishes Away ğŸ¥£', expandable: false },
                        { id: 'karl-sat-washing', title: 'Washing away ğŸ§º', expandable: false },
                        { id: 'karl-sat-vitamins', title: 'Take Vitamins ğŸ’Š', expandable: false },
                        { id: 'karl-sat-teeth', title: 'Teeth ğŸ¦·', expandable: false }
                    ],
                    evening: [
                        { id: 'karl-sat-molly', title: 'Walk Molly ğŸ¦®', expandable: false },
                        { id: 'karl-sat-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'karl-sat-teeth-pm', title: 'Teeth ğŸ¦·', expandable: false }
                    ]
                },
                jayne: {
                    morning: [
                        { id: 'jayne-sat-wake', title: 'Wake up â˜€ï¸', expandable: false },
                        { id: 'jayne-sat-shower', title: 'Shower ğŸš¿', expandable: false },
                        { id: 'jayne-sat-breakfast', title: 'Breakfast ğŸ', expandable: false },
                        { id: 'jayne-sat-dishes', title: 'Dishes Away ğŸ¥£', expandable: false },
                        { id: 'jayne-sat-coffee', title: 'Coffee â˜•ï¸', expandable: false },
                        { id: 'jayne-sat-teeth', title: 'Teeth ğŸ¦·', expandable: false },
                        { 
                            id: 'jayne-sat-face',
                            title: 'Wash Face ğŸ§–ğŸ¼',
                            expandable: true,
                            subtasks: [
                                { id: 'jayne-sat-cleanse', text: 'Gentle cleanser' },
                                { id: 'jayne-sat-toner', text: 'Apply toner' },
                                { id: 'jayne-sat-serum', text: 'Vitamin C serum' },
                                { id: 'jayne-sat-eye', text: 'Eye cream' },
                                { id: 'jayne-sat-moisturizer', text: 'Moisturizer' },
                                { id: 'jayne-sat-sunscreen', text: 'SPF 50+ sunscreen' }
                            ]
                        }
                    ],
                    evening: [
                        { id: 'jayne-sat-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'jayne-sat-teeth-pm', title: 'Teeth ğŸ¦·', expandable: false },
                        { id: 'jayne-sat-vitamins', title: 'Take Vitamins ğŸ’Š', expandable: false },
                        { 
                            id: 'jayne-sat-face-pm',
                            title: 'Wash Face ğŸ§–ğŸ¼',
                            expandable: true,
                            subtasks: [
                                { id: 'jayne-sat-makeup', text: 'Remove makeup' },
                                { id: 'jayne-sat-cleanse-pm', text: 'Double cleanse' },
                                { id: 'jayne-sat-toner-pm', text: 'Apply toner' },
                                { id: 'jayne-sat-treatment', text: 'Treatment serum' },
                                { id: 'jayne-sat-eye-pm', text: 'Eye cream' },
                                { id: 'jayne-sat-night', text: 'Rich night cream' },
                                { id: 'jayne-sat-lip', text: 'Lip treatment' }
                            ]
                        }
                    ]
                },
                henry: {
                    morning: [
                        { id: 'henry-sat-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'henry-sat-dressed', title: 'Get Dressed ğŸ‘•', expandable: false },
                        { id: 'henry-sat-breakfast', title: 'Breakfast ğŸ½ï¸', expandable: false },
                        { id: 'henry-sat-teeth', title: 'Brush Teeth ğŸ¦·', expandable: false }
                    ],
                    evening: [
                        { id: 'henry-sat-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'henry-sat-bath', title: 'Bath Time ğŸ›', expandable: false },
                        { id: 'henry-sat-teeth-pm', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'henry-sat-story', title: 'Bedtime Story ğŸ“š', expandable: false },
                        { id: 'henry-sat-sleep', title: 'Sleep ğŸ˜´', expandable: false }
                    ]
                },
                sophie: {
                    morning: [
                        { id: 'sophie-sat-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'sophie-sat-dressed', title: 'Get Dressed ğŸ‘—', expandable: false },
                        { id: 'sophie-sat-breakfast', title: 'Breakfast ğŸ½ï¸', expandable: false },
                        { id: 'sophie-sat-teeth', title: 'Brush Teeth ğŸ¦·', expandable: false }
                    ],
                    evening: [
                        { id: 'sophie-sat-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'sophie-sat-bath', title: 'Bath Time ğŸ›', expandable: false },
                        { id: 'sophie-sat-teeth-pm', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'sophie-sat-story', title: 'Bedtime Story ğŸ“š', expandable: false },
                        { id: 'sophie-sat-sleep', title: 'Sleep ğŸ˜´', expandable: false }
                    ]
                },
                shared: [
                    { 
                        id: 'shared-sat-swimming',
                        title: 'Pack Swimming Bag ğŸŠ',
                        expandable: true,
                        subtasks: [
                            { id: 'swim-towels', text: 'Towels' },
                            { id: 'swim-goggles', text: 'Goggles' },
                            { id: 'swim-cap', text: 'Swim Cap' },
                            { id: 'swim-clothes', text: 'Change of clothes' },
                            { id: 'swim-wet-bag', text: 'Wet Bag' },
                            { id: 'swim-drinks', text: 'Drink Bottles' },
                            { id: 'swim-snacks', text: 'Snacks' }
                        ]
                    }
                ]
            },
            Sunday: {
                karl: {
                    morning: [
                        { id: 'karl-sun-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'karl-sun-shower', title: 'Shower ğŸš¿', expandable: false },
                        { id: 'karl-sun-breakfast', title: 'Breakfast ğŸ', expandable: false },
                        { id: 'karl-sun-coffee', title: 'Coffee â˜•ï¸', expandable: false },
                        { id: 'karl-sun-molly', title: 'Walk Molly ğŸ¦®', expandable: false },
                        { id: 'karl-sun-vitamins', title: 'Take Vitamins ğŸ’Š', expandable: false },
                        { id: 'karl-sun-teeth', title: 'Teeth ğŸ¦·', expandable: false }
                    ],
                    evening: [
                        { id: 'karl-sun-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'karl-sun-clear', title: 'Clear table ğŸ´', expandable: false },
                        { id: 'karl-sun-teeth-pm', title: 'Teeth ğŸ¦·', expandable: false }
                    ]
                },
                jayne: {
                    morning: [
                        { id: 'jayne-sun-wake', title: 'Wake up â˜€ï¸', expandable: false },
                        { id: 'jayne-sun-shower', title: 'Shower ğŸš¿', expandable: false },
                        { id: 'jayne-sun-bed', title: 'Make bed ğŸ›ï¸', expandable: false },
                        { id: 'jayne-sun-breakfast', title: 'Breakfast ğŸ', expandable: false },
                        { id: 'jayne-sun-coffee', title: 'Coffee â˜•ï¸', expandable: false },
                        { id: 'jayne-sun-washing', title: 'Washing away ğŸ§º', expandable: false },
                        { id: 'jayne-sun-teeth', title: 'Teeth ğŸ¦·', expandable: false },
                        { 
                            id: 'jayne-sun-face',
                            title: 'Wash Face ğŸ§–ğŸ¼',
                            expandable: true,
                            subtasks: [
                                { id: 'jayne-sun-cleanse', text: 'Gentle cleanser' },
                                { id: 'jayne-sun-toner', text: 'Apply toner' },
                                { id: 'jayne-sun-serum', text: 'Vitamin C serum' },
                                { id: 'jayne-sun-eye', text: 'Eye cream' },
                                { id: 'jayne-sun-moisturizer', text: 'Moisturizer' },
                                { id: 'jayne-sun-sunscreen', text: 'SPF 50+ sunscreen' }
                            ]
                        }
                    ],
                    evening: [
                        { id: 'jayne-sun-molly', title: 'Walk Molly ğŸ¦®', expandable: false },
                        { id: 'jayne-sun-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'jayne-sun-teeth-pm', title: 'Teeth ğŸ¦·', expandable: false },
                        { id: 'jayne-sun-vitamins', title: 'Take Vitamins ğŸ’Š', expandable: false },
                        { 
                            id: 'jayne-sun-face-pm',
                            title: 'Wash Face ğŸ§–ğŸ¼',
                            expandable: true,
                            subtasks: [
                                { id: 'jayne-sun-makeup', text: 'Remove makeup' },
                                { id: 'jayne-sun-cleanse-pm', text: 'Double cleanse' },
                                { id: 'jayne-sun-toner-pm', text: 'Apply toner' },
                                { id: 'jayne-sun-treatment', text: 'Treatment serum' },
                                { id: 'jayne-sun-eye-pm', text: 'Eye cream' },
                                { id: 'jayne-sun-night', text: 'Rich night cream' },
                                { id: 'jayne-sun-lip', text: 'Lip treatment' }
                            ]
                        }
                    ]
                },
                henry: {
                    morning: [
                        { id: 'henry-sun-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'henry-sun-dressed', title: 'Get Dressed ğŸ‘•', expandable: false },
                        { id: 'henry-sun-breakfast', title: 'Breakfast ğŸ½ï¸', expandable: false },
                        { id: 'henry-sun-teeth', title: 'Brush Teeth ğŸ¦·', expandable: false }
                    ],
                    evening: [
                        { id: 'henry-sun-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'henry-sun-bath', title: 'Bath Time ğŸ›', expandable: false },
                        { id: 'henry-sun-teeth-pm', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'henry-sun-story', title: 'Bedtime Story ğŸ“š', expandable: false },
                        { id: 'henry-sun-sleep', title: 'Sleep ğŸ˜´', expandable: false }
                    ]
                },
                sophie: {
                    morning: [
                        { id: 'sophie-sun-wake', title: 'Wake Up â˜€ï¸', expandable: false },
                        { id: 'sophie-sun-dressed', title: 'Get Dressed ğŸ‘—', expandable: false },
                        { id: 'sophie-sun-breakfast', title: 'Breakfast ğŸ½ï¸', expandable: false },
                        { id: 'sophie-sun-teeth', title: 'Brush Teeth ğŸ¦·', expandable: false }
                    ],
                    evening: [
                        { id: 'sophie-sun-dinner', title: 'Dinner ğŸ½ï¸', expandable: false },
                        { id: 'sophie-sun-bath', title: 'Bath Time ğŸ›', expandable: false },
                        { id: 'sophie-sun-teeth-pm', title: 'Brush Teeth ğŸ¦·', expandable: false },
                        { id: 'sophie-sun-story', title: 'Bedtime Story ğŸ“š', expandable: false },
                        { id: 'sophie-sun-sleep', title: 'Sleep ğŸ˜´', expandable: false }
                    ]
                },
                shared: []
            }
        };

        const scheduleData = {
            Monday: {
                karlLeave: '6:45 AM',
                jayneLeave: '~8:00 AM',
                dinner: 'Pumpkin Soup',
                agenda: "Karl: 7:45AM-4PM | Jayne: 8AM-5:30PM"
            },
            Tuesday: {
                karlLeave: '6:45 AM',
                jayneLeave: '~8:00 AM',
                dinner: 'Tacos',
                agenda: "Sophie Prep Orientation 10-11AM | Henry Chocolate Factory 9-11AM"
            },
            Wednesday: {
                karlLeave: 'HOME',
                jayneLeave: '~8:00 AM',
                dinner: 'Carbonara',
                agenda: "Karl OFF | Jayne: 8AM-5:30PM"
            },
            Thursday: {
                karlLeave: '6:45 AM',
                jayneLeave: 'HOME',
                dinner: 'Chicken Burgers',
                agenda: "Henry Exercise Physiology 4PM | Jayne OFF"
            },
            Friday: {
                karlLeave: '6:45 AM',
                jayneLeave: '~7:30 AM',
                dinner: 'Nuggets & Chips',
                agenda: "Kool Kidz Graduation 6PM | Jayne 9AM-5PM"
            },
            Saturday: {
                karlLeave: 'HOME',
                jayneLeave: '1:00 PM',
                dinner: 'Pizza',
                agenda: "Jayne drinks with Eb 1PM | Sarah's Birthday"
            },
            Sunday: {
                karlLeave: '7:45 AM',
                jayneLeave: 'HOME',
                dinner: 'Sausages',
                agenda: "Karl: 8:45AM-6:15PM | Jayne & Kids Home"
            }
        };

        let currentDay = '';
        let currentView = 'main';
        let taskStates = {};
        
        // Initialize
        function init() {
            loadTaskStates();
            updateDateTime();
            setInterval(updateCurrentTime, 30000);
            setInterval(updateCountdowns, 1000);
            
            const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const today = days[new Date().getDay()];
            selectDay(today);
        }
        
        function selectDay(dayName) {
            currentDay = dayName;
            
            document.querySelectorAll('.day-button').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent === dayName) {
                    btn.classList.add('active');
                }
            });
            
            const schedule = scheduleData[dayName];
            document.getElementById('dinner-info').textContent = schedule.dinner;
            document.getElementById('agenda-info').textContent = schedule.agenda;
            
            document.getElementById('karl-leave-time').textContent = schedule.karlLeave;
            document.getElementById('jayne-leave-time').textContent = schedule.jayneLeave;
            
            if (currentView !== 'main') {
                renderTasks(currentView);
            }
            
            updateAllProgress();
            updateCountdowns();
        }
        
        function showDetail(person) {
            console.log('Showing detail for:', person);
            // Will implement full detail view in next update
        }
        
        function showMain() {
            currentView = 'main';
            document.querySelectorAll('.detail-view').forEach(view => {
                view.classList.remove('active');
                view.style.display = 'none';
            });
            
            document.getElementById('main-view').style.display = 'block';
            updateAllProgress();
            updateCountdowns();
        }
        
        function updateAllProgress() {
            ['karl', 'jayne', 'henry', 'sophie', 'shared'].forEach(person => {
                updateProgress(person);
            });
        }
        
        function updateProgress(person) {
            if (!currentDay || !taskData[currentDay]) return;
            
            let tasks = [];
            if (person === 'shared') {
                tasks = taskData[currentDay].shared || [];
            } else {
                const dayData = taskData[currentDay][person];
                if (dayData) {
                    tasks = [...(dayData.morning || []), ...(dayData.evening || [])];
                }
            }
            
            const completed = tasks.filter(t => taskStates[t.id]).length;
            const total = tasks.length;
            const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;
            
            // Update main view progress
            const fillEl = document.getElementById(`${person}-progress-fill`);
            const textEl = document.getElementById(`${person}-progress-text`);
            const countEl = document.getElementById(`${person}-task-count`);
            
            if (fillEl) {
                fillEl.style.width = `${percentage}%`;
                if (textEl) textEl.textContent = `${percentage}%`;
            }
            if (countEl) {
                countEl.textContent = `${completed} / ${total} tasks`;
            }
            
            // Update detail view progress if viewing this person
            if (currentView === person) {
                const detailFillEl = document.getElementById(`${person}-detail-progress-fill`);
                const detailTextEl = document.getElementById(`${person}-detail-progress-text`);
                const detailCountEl = document.getElementById(`${person}-detail-task-count`);
                
                if (detailFillEl) {
                    detailFillEl.style.width = `${percentage}%`;
                    if (detailTextEl) detailTextEl.textContent = `${percentage}%`;
                }
                if (detailCountEl) {
                    detailCountEl.textContent = `${completed} / ${total} tasks`;
                }
            }
        }
        
        function showDetail(person) {
            currentView = person;
            document.getElementById('main-view').style.display = 'none';
            
            document.querySelectorAll('.detail-view').forEach(view => {
                view.classList.remove('active');
                view.style.display = 'none';
            });
            
            const detailView = document.getElementById(`${person}-detail`);
            if (detailView) {
                detailView.style.display = 'block';
                detailView.classList.add('active');
            }
            
            renderDetailView(person);
            updateProgress(person);
            updateCountdowns();
        }
        
        function renderDetailView(person) {
            if (!currentDay || !taskData[currentDay]) return;
            
            const detailView = document.getElementById(`${person}-detail`);
            if (!detailView) return;
            
            const schedule = scheduleData[currentDay];
            
            detailView.innerHTML = `
                <button class="back-button" onclick="showMain()">â† Back to Dashboard</button>
                
                <div class="detail-header">
                    <h2>${getPersonEmoji(person)} ${capitalize(person)}'s Tasks</h2>
                    ${person === 'karl' || person === 'jayne' ? `
                        <div class="current-time" id="${person}-detail-time">${getCurrentTime()}</div>
                        <div class="countdown green" id="${person}-detail-countdown">Loading...</div>
                    ` : ''}
                    <div class="progress-display">
                        <div class="progress-bar">
                            <div class="progress-fill" id="${person}-detail-progress-fill" style="width: 0%">
                                <span id="${person}-detail-progress-text">0%</span>
                            </div>
                        </div>
                        <div class="progress-text" id="${person}-detail-task-count">0 / 0 tasks</div>
                    </div>
                </div>
                
                ${person === 'shared' ? renderSharedTasks() : renderPersonTasks(person)}
            `;
            
            updateCountdowns();
        }
        
        function renderPersonTasks(person) {
            const dayData = taskData[currentDay][person];
            if (!dayData) return '<p>No tasks for today!</p>';
            
            return `
                ${dayData.morning && dayData.morning.length > 0 ? `
                    <div class="task-section">
                        <h3>ğŸŒ… Morning Routine</h3>
                        <div class="task-list" id="${person}-morning-list">
                            ${dayData.morning.map(task => createTaskHTML(task, person)).join('')}
                        </div>
                    </div>
                ` : ''}
                
                ${dayData.evening && dayData.evening.length > 0 ? `
                    <div class="task-section">
                        <h3>ğŸŒ™ Evening Routine</h3>
                        <div class="task-list" id="${person}-evening-list">
                            ${dayData.evening.map(task => createTaskHTML(task, person)).join('')}
                        </div>
                    </div>
                ` : ''}
            `;
        }
        
        function renderSharedTasks() {
            const sharedTasks = taskData[currentDay].shared || [];
            if (sharedTasks.length === 0) return '<p>No shared tasks for today!</p>';
            
            return `
                <div class="task-section">
                    <h3>ğŸ  Shared Tasks for Today</h3>
                    <div class="task-list" id="shared-list">
                        ${sharedTasks.map(task => createTaskHTML(task, 'shared')).join('')}
                    </div>
                </div>
            `;
        }
        
        function createTaskHTML(task, person) {
            const isCompleted = taskStates[task.id] || false;
            
            if (task.expandable && task.subtasks) {
                const allSubtasksComplete = task.subtasks.every(st => taskStates[st.id]);
                
                return `
                    <div class="task-item expandable-task ${isCompleted ? 'completed' : ''}" id="task-${task.id}">
                        <div class="task-checkbox">${isCompleted ? 'âœ“' : ''}</div>
                        <div class="task-content">
                            <div class="task-title">${task.title}</div>
                        </div>
                        <div class="expand-icon" onclick="event.stopPropagation(); toggleExpand('${task.id}')">â–¼</div>
                    </div>
                    <div class="subtask-container" id="subtasks-${task.id}">
                        ${task.subtasks.map(subtask => createSubtaskHTML(subtask, task.id, person)).join('')}
                    </div>
                `;
            } else {
                return `
                    <div class="task-item ${isCompleted ? 'completed' : ''}" onclick="toggleTask('${task.id}', '${person}')" id="task-${task.id}">
                        <div class="task-checkbox">${isCompleted ? 'âœ“' : ''}</div>
                        <div class="task-content">
                            <div class="task-title">${task.title}</div>
                        </div>
                    </div>
                `;
            }
        }
        
        function createSubtaskHTML(subtask, parentId, person) {
            const isCompleted = taskStates[subtask.id] || false;
            
            return `
                <div class="subtask-item ${isCompleted ? 'completed' : ''}" onclick="toggleSubtask('${subtask.id}', '${parentId}', '${person}')" id="subtask-${subtask.id}">
                    <div class="subtask-checkbox">${isCompleted ? 'âœ“' : ''}</div>
                    <div class="subtask-text">${subtask.text}</div>
                </div>
            `;
        }
        
        function toggleTask(taskId, person) {
            taskStates[taskId] = !taskStates[taskId];
            saveTaskStates();
            
            if (taskStates[taskId]) {
                showCelebration('Great job!', 'Task completed! ğŸ‰');
            }
            
            renderDetailView(person);
            updateAllProgress();
        }
        
        function toggleSubtask(subtaskId, parentTaskId, person) {
            taskStates[subtaskId] = !taskStates[subtaskId];
            
            // Find the parent task
            const parentTask = findTaskById(parentTaskId);
            if (parentTask && parentTask.subtasks) {
                const allSubtasksComplete = parentTask.subtasks.every(st => taskStates[st.id]);
                taskStates[parentTaskId] = allSubtasksComplete;
                
                if (allSubtasksComplete) {
                    showCelebration('All steps complete!', `${parentTask.title} finished! ğŸ‰`);
                }
            }
            
            saveTaskStates();
            renderDetailView(person);
            updateAllProgress();
        }
        
        function toggleExpand(taskId) {
            const container = document.getElementById(`subtasks-${taskId}`);
            const taskItem = document.getElementById(`task-${taskId}`);
            
            if (container && taskItem) {
                container.classList.toggle('expanded');
                taskItem.classList.toggle('expanded');
            }
        }
        
        function findTaskById(taskId) {
            if (!currentDay || !taskData[currentDay]) return null;
            
            for (const person in taskData[currentDay]) {
                if (person === 'shared') {
                    const task = taskData[currentDay].shared.find(t => t.id === taskId);
                    if (task) return task;
                } else {
                    const data = taskData[currentDay][person];
                    if (data.morning) {
                        const task = data.morning.find(t => t.id === taskId);
                        if (task) return task;
                    }
                    if (data.evening) {
                        const task = data.evening.find(t => t.id === taskId);
                        if (task) return task;
                    }
                }
            }
            return null;
        }
        
        function showCelebration(title, message) {
            const modal = document.getElementById('celebration-modal');
            document.getElementById('celebration-title').textContent = title;
            document.getElementById('celebration-message').textContent = message;
            
            modal.classList.add('active');
            
            setTimeout(() => {
                modal.classList.remove('active');
            }, 2000);
        }
        
        function getPersonEmoji(person) {
            const emojis = {
                karl: 'ğŸ‘¨',
                jayne: 'ğŸ‘©',
                henry: 'ğŸ§’',
                sophie: 'ğŸ‘§',
                shared: 'ğŸ '
            };
            return emojis[person] || '';
        }
        
        function capitalize(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }
        
        function getCurrentTime() {
            return new Date().toLocaleTimeString('en-AU', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: true 
            });
        }
        
        function updateDateTime() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('current-date').textContent = now.toLocaleDateString('en-AU', options);
            updateCurrentTime();
        }
        
        function updateCurrentTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = now.toLocaleTimeString('en-AU', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: true 
            });
        }
        
        function updateCountdowns() {
            if (!currentDay) return;
            
            const schedule = scheduleData[currentDay];
            const now = new Date();
            
            // Update main countdown (for Jayne or whoever leaves first)
            updateSingleCountdown('countdown', schedule.jayneLeave, now);
            
            // Update detail countdowns if viewing Karl or Jayne
            if (currentView === 'karl') {
                updateSingleCountdown('karl-detail-countdown', schedule.karlLeave, now);
            } else if (currentView === 'jayne') {
                updateSingleCountdown('jayne-detail-countdown', schedule.jayneLeave, now);
            }
        }
        
        function updateSingleCountdown(elementId, leaveTime, now) {
            const el = document.getElementById(elementId);
            if (!el) return;
            
            // Handle "HOME" or other text leave times
            if (!leaveTime || leaveTime === 'HOME' || !leaveTime.includes(':')) {
                el.textContent = leaveTime === 'HOME' ? 'Home Day ğŸ ' : leaveTime;
                el.className = 'countdown green';
                return;
            }
            
            // Parse leave time
            const timeMatch = leaveTime.match(/(\d+):(\d+)\s*(AM|PM)?/i);
            if (!timeMatch) {
                el.textContent = leaveTime;
                el.className = 'countdown green';
                return;
            }
            
            let hours = parseInt(timeMatch[1]);
            const minutes = parseInt(timeMatch[2]);
            const period = timeMatch[3];
            
            // Convert to 24-hour format if AM/PM is specified
            if (period) {
                if (period.toUpperCase() === 'PM' && hours !== 12) {
                    hours += 12;
                } else if (period.toUpperCase() === 'AM' && hours === 12) {
                    hours = 0;
                }
            }
            
            const leaveDate = new Date();
            leaveDate.setHours(hours, minutes, 0, 0);
            
            // If leave time is in the past, assume it's tomorrow
            if (leaveDate < now) {
                leaveDate.setDate(leaveDate.getDate() + 1);
            }
            
            const diff = leaveDate - now;
            const diffMinutes = Math.floor(diff / 1000 / 60);
            
            // Already passed leave time
            if (diff < 0 || diffMinutes < 0) {
                el.textContent = 'Time to go! ğŸš—';
                el.className = 'countdown red';
                return;
            }
            
            // Calculate display
            const hoursLeft = Math.floor(diffMinutes / 60);
            const minutesLeft = diffMinutes % 60;
            
            // Set countdown text
            if (hoursLeft > 0) {
                el.textContent = `Leave in ${hoursLeft}h ${minutesLeft}m`;
            } else {
                el.textContent = `Leave in ${minutesLeft}m`;
            }
            
            // Set color based on time remaining
            if (diffMinutes <= 0) {
                el.className = 'countdown red';  // Time to go!
            } else if (diffMinutes <= 15) {
                el.className = 'countdown orange';  // 15 minutes or less
            } else {
                el.className = 'countdown green';  // Plenty of time
            }
        }
        
        function saveTaskStates() {
            localStorage.setItem('familyPlannerTasks', JSON.stringify(taskStates));
            localStorage.setItem('lastSaveDate', new Date().toDateString());
        }
        
        function loadTaskStates() {
            const savedDate = localStorage.getItem('lastSaveDate');
            const today = new Date().toDateString();
            
            if (savedDate !== today) {
                taskStates = {};
                localStorage.removeItem('familyPlannerTasks');
                return;
            }
            
            const saved = localStorage.getItem('familyPlannerTasks');
            if (saved) {
                taskStates = JSON.parse(saved);
            }
        }
        
        init();
    </script>
</body>
</html>